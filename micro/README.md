之前从事 Java 开发，用的是基于 SpringCloud 的微服务框架。

- 注册中心 Eureka
- 配置中心 Config
- 服务网关 Gateway
- 服务消费 Feign
- 断路器 Hystrix

但是其实很多的时候更多的是使用层面，对其原理不是很了解。



后面加入新公司之后，工作的中心从 Java  服务端开发，更多的转向负责公司 Node BFF 层搭建，利用公司中台提供的服务，进行快速的业务开发。

我们只要使用的是 Egg 框架。



但这里面还是会遇到很多的问题。比如在对接用户中台的时候，用户中台总共提供了 手机验证码登录、第三方登录，发送短信验证码等一系列服务，在调用每个接口的时候都需要 进行参数效验，而且我们的项目还挺多的，然后每个项目都需要 跟 中台对接用户， 都需要处理一下 参数效验问题。其实这样还是挺麻烦的。



后面我们就统一的抽取了一个用户服务，全量的对接中台所有的功能。后续各个业务对接 Node 这边的 用户服务，这样也减少了沟通成本，不然这样每个人处理新业务的人都需要去跟中台的人对接。



```sequence
BFF业务 -> Node 用户服务: 业务1
BFF业务 -> Node 用户服务: 业务2
BFF业务 -> Node 用户服务: 业务3
BFF业务 -> Node 用户服务: 业务4

Node 用户服务 -> 用户中台: 统一的 Node 用户服务 对接用户中台
用户中台 --> Node 用户服务: 返回结果
Node 用户服务 --> BFF业务: 返回给各个业务线
```

大概就像 上诉时序图这样。

而且 有的我们负责的业务，有的时候 中台支持不好，就需要我们支持，然后就会出现横向 Node 调用的情况。

